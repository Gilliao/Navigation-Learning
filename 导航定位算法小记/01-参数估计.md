导航定位本质上都属于状态估计问题，根据各种导航传感器提供的带有噪声的量测数据，去估计载体的运动状态（包括位置、速度、姿态，简称 PVA）。导航定位的时候，我们无法知道 PVA 状态量的真实信息，因为导航器件的输出都带有误差、根据量测值去推算 PVA 的算法也会引入误差；真值永远不可知，也就无法用一个确定的值来描述 PVA，但是我们可以推算得到 PVA 的概率分布，比如可以用高斯分布来衡量一个量，标量可以表示成值和方差的形式，扩展到向量，可以表示成状态向量和协方差矩阵的形式。

同样的，我们没法知道的，但是量测信息的准确度

当向量经过线性变化，也就是乘以一个矩阵的时候，它的协方差也会跟着变化，这种变化满足协方差传播定律，





比如卡尔曼滤波，

<img src="https://pic-bed-1316053657.cos.ap-nanjing.myqcloud.com/img/image-20231206152231176.png" alt="image-20231206152231176" style="zoom: 40%;" />



从上往下可以分为时间更新和量测更新两个部分，

* **时间更新**：
* **量测更新**：



我们本来就有一个对状态量的认识，现在又得到一个对状态量新的认识，两种认识都可以表示成状态量和对应的协方差，想综合利用这些信息，得到对状态最优的估计，最简单的办法就是以协方差的倒数作为权重，把这两种信息做加权平均。



卡尔曼滤波分为两个过程：时间更新和量测更新，

* **时间更新**过程中协方差一定是增大的，因为得到的状态量是由上一时刻状态预测得来的，预测的过程中给状态量增加了不确定性。

* **量测更新**的过程中协方差一定是减小的，因为有了新的信息让我们对状态量认识更近一步，









具体到 GNSS/INS 松组合







状态估计理论的起源可以追溯至1654年帕斯卡和费马奠定了概率论的基础，以及1764年贝叶斯法则的提出。1801年，高斯利用最小化观测误差提出了最小二乘法，成功估计出了谷神星的轨道，并于1803年证明了在观测噪声为正态分布的条件下，最小二乘估计就是最优估计。

到20世纪中期，卡尔曼1960年发表的文章为状态估计理论的发展指明了方向；后人把这种针对高斯线性系统的经典状态估计方法称之为卡尔曼滤波，并且证明出在最小方差准则下，卡尔曼滤波是对高斯线性时不变离散系统的最优无偏估计。





上文我们提到过，在最小方差准则下，卡尔曼滤波是对高斯线性时不变离散系统的最优无偏估计，只是一个理想情况，实际的导航系统，





牛顿经典力学体系下，载体肯定是连续的，不是连续系统，

实际导航算法，大都使用的是扩展卡尔曼滤波，简称 EKF





，通过引入线性化手段，适用于非线性系统高斯噪声下的扩展卡尔曼滤波(Extended Kalman Filter,EKF)、无迹卡尔曼滤波(Unscented Kalman Filter,UKF)和容积卡尔曼滤波(Cubature Kalman Filter,CKF)算法被陆续提出。此外，20世纪后期提出的粒子滤波、最大后验估计、贝叶斯估计等状态估计方法，将状态估计的应用领域扩展至了非线性系统。

针对有色噪声，

针对线性化，

针对非高斯噪声的影响，





最优估计，都是建立某在一种确定的准则之下的，

可能在某种准则下是最优估计，













PSINS 已经实现了轨迹和 IMU 数据的仿真





一种滤波算法的实际效果不是论文里几张结果图就能说明白的，可能对某些数据集效果很好；

引入了很多新的参数，增加了系统的复杂度，调参困难，



，卡尔曼滤波是在最小方差准则下对高斯线性时不变离散系统的最优无偏估计；这显然是理想化的情形，实际导航问题中，载体运动一定是非线性的时变连续系统，

<img align="center" width="600" src="https://pic-bed-1316053657.cos.ap-nanjing.myqcloud.com/img/image-20231206152231176.png" alt="image-20231206152231176"  />



* 针对强非线性系统，无迹卡尔曼滤波、容积卡尔曼滤波、粒子滤波等；
* 为提高计算销量，平方根滤波、信息滤波、序贯滤波；
* 
* 针对量测值非高斯分布的噪声，最大熵、变分贝叶斯；





参数估计算法虽然有严格的数学推导，但大都建立在某些假设和准则下，推导的过程中做了很多近似，

很多参数都依赖经验来设定，比如各种卡尔曼滤波中都会有的量测噪声 $R$ 、过程噪声 $Q$ 、初始噪声 $P_0$ ，UKF 中的 ，MCKF 中的核带宽度 $\sigma$ ，自适应滤波的遗忘因子 $k$ 等；



做卡尔曼滤波的论文已经有很多了，但是大多数的论文不提供源代码，很难去复现，有的论文想读懂都困难；拼拼凑凑提出的新算法可能毫无工程实践价值，新算法也许还不如老算法调参来的有用







