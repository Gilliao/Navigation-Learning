<div align="center">
<h1>导航定位算法解惑</h1>
</div>

<div align="center">
    <img alt="Static Badge" src="https://img.shields.io/badge/QQ-1482275402-red">
    <img alt="Static Badge" src="https://img.shields.io/badge/%E5%BE%AE%E4%BF%A1-lizhengxiao99-green">
    <img alt="Static Badge" src="https://img.shields.io/badge/Email-dauger%40126.com-brown">
        <p>👇👇👇&nbsp;&nbsp;
        <a href="#Coding">代码优化</a>|
        <a href="#Estimate">参数估计</a>|
        <a href="#GNSS">GNSS</a>|
        <a href="#INS/组合导航">INS</a>|
        <a href="#SLAM">SLAM</a>|
        <a href="#MSF">多源融合</a>|&nbsp;&nbsp;
	👇👇👇</p>
</div>

[TOC]

<br/>

<div align="center">
    <a name="Coding"></a>
	<h2>&nbsp;1-代码优化&nbsp;</h2>
</div>

### Q：C++ 程序与 C 语言程序相比，性能可能会差在哪些地方？

> 







---

<div align="center">
    <a name="Estimate"></a>
	<h2>&nbsp;2-参数估计&nbsp;</h2>
</div>
### Q：双向滤波平滑和RTS平滑的关系？平滑后能提高多少精度？

> * RTKLIB 后处理模式下就可以选择前向滤波、后向滤波，双向滤波平滑。
> * 我的理解，RTS和双向滤波等价，比单向滤波精度高，全高斯白噪声理想情况精度高一倍；双向滤波是从前往后算一遍，存下状态向量、协方差，再从后往前算一遍，前后的结果取加权平均；RTS也是先从前往后算一遍，存的量更多，但从后往前算可以直接出平滑后的结果
> * 平滑结果是前向滤波、反向滤波的加权平均，假设前后向滤波协方差都是0.5，那加权平均之后就变成0.25，内符合精度高一倍，实际有一些系统误差，有一些非高斯白噪声，到不了这效果。

### Q：卡尔曼滤波的改进这么多？抗差、自适应、序贯、平方根、信息，为啥开源程序很少用？

> * 估钟的程序很多要用平方根滤波；
> * IGG3 抗差在 Ginav 等程序中有应用；
> * PSINS 里实现了很多滤波算法；

### Q：最小二乘量测个数必须大于参数，卡尔曼滤波是否也如此？不足够四颗卫星也能定位？

> * 卡尔曼滤波有状态更新，其实是对估计参数做了约束，相当于多了伪观测方程；即使不是4颗卫星，但是看上去参数仍然是可估的，当然这个参数估计不一定是最优的；

### Q：最小二乘迭代可以理解为梯度下降吗，是否会陷入局部最优？





### Q：为何CV模型中位置速度都加过程噪声，CA模型只给加速度加过程噪声？



### Q：白噪声、随机游走、马尔科夫噪声等随机模型，在卡尔曼滤波处理中的代码实现？





### Q：卡尔曼滤波时间更新、量测更新可以迭代吗？







---

<div align="center">
    <a name="GNSS"></a>
	<h2>&nbsp;3-GNSS&nbsp;</h2>
</div>

### Q：单系统单频算法，改进到多系统多频算法，需要进行哪些处理？

> * 单系统拓展到多系统，需要估计系统间偏差 ISB，本质主要是各卫星系统间的时间偏差，因为各卫星系统时间由不同的组织来维持；



### Q：高度坐标分量与接收机钟差之间存在着很高的相关性？

> 来源于谢钢的书中解释：因为各颗可见卫星均在用户接收机的上方一侧，所以用户高度值的变化对各个卫星伪距测量值差不多有相同的影响。接收机钟差能吸收各个伪距测量变化的公共部分，而GPS定位结果中的高度坐标分量也近似地具有这种吸收不同伪距测量值公共部分的能力，因而高度坐标分量与接收机钟差之间存在着很高的相关性。



### Q：多频观测值的组合，应该关注什么？

> 首先组合观测值的**目的**：主要可以用于周跳探测、模糊度固定；





### Q：DCB、OSB、UDP、FCB 等等偏差改正参数分别表示什么？





### Q：伪距、载波、多普勒量测数据，静止和匀速直线运动分别有何特征？





### Q：伪距和载波都做为观测值参与卡尔曼滤波量测更新，但是程序里都会给伪距设置很大的量测噪声，对定位解算能起作用吗？

> * 在以载波相位为。伪距量测值
> * 伪距和载波的关系可以理解为游标卡尺的主尺和游标尺，



### Q：伪距率和多普勒等价吗？有能输出伪距率的接收机吗？

> * 多普勒靠载波环输出的，伪距率可以是码环输出的，载波环比码环精度高
>
> * RINEX 标准，有伪距率

### Q：伪距、载波、多普勒三者之间的耦合关系？

> * **多普勒和载波相互影响**：多普勒频移和载波相位在接收机里都主要靠锁相环确定，多普勒频移误差大，锁相环跟踪不上载波载波就周跳了，反过来载波受干扰误差大，影响锁相环里鉴相结果，误差也会加到多普勒频移里



### Q：如何分辨天线是否有源、只能单频 GPS 的天线与全系统全频点区别？





### Q：伪距单点定位，不改正对流层电离层，只估计钟差和三维坐标，精度有多少？

> 没做，这个测试起来简单，下载2024年的1月2日WUH2测站的数据用rtklib-demob34k测试结果如下：
>
> 



### Q：RTKLIB 没做北斗二的伪距多路径延迟改正，改正后能提高多少精度？





### Q：双天线一般要求两个天线之间距离至少1~1.5米，短了效果会差多少？

> 双天线基线长度与航向角精度关系：
>
> <img src="https://pic-bed-1316053657.cos.ap-nanjing.myqcloud.com/img/%E5%8F%8C%E5%A4%A9%E7%BA%BF%E5%9F%BA%E7%BA%BF%E9%95%BF%E5%BA%A6%E4%B8%8E%E8%88%AA%E5%90%91%E8%A7%92%E7%B2%BE%E5%BA%A6%E5%85%B3%E7%B3%BB.png" alt="双天线基线长度与航向角精度关系" style="zoom:50%;" />
>
> 双天线基线长度较短时，





---

<div align="center">
    <a name="INS"></a>
	<h2>&nbsp;4-INS/组合导航&nbsp;</h2>
</div>

### Q：IMU 加减震器，效果如何？

> 摘自在 PSINS 群里发的图，IMU放在拖拉机上，买的淘宝几块钱包邮的飞控减震器，效果如下：
>
> <img src="https://pic-bed-1316053657.cos.ap-nanjing.myqcloud.com/img/IMU%E5%87%8F%E9%9C%87%E6%95%88%E6%9E%9C.png" alt="IMU减震效果" style="zoom: 33%;" />
>
> 减震器的效果挺显著的，如果有条件定制减震器，效果应该会更好。

### Q：捷联惯导，1小时、1分钟、30s，递推误差达到多少？





### Q：平台惯导在民用领域还有应用吗？有无开源程序和数据？





### Q：淘宝上有很多九轴 IMU，带了磁力计，对定位定姿提升在哪些方面？





### Q：看 IMU 数据文件如何快速分辨：是否增量输出？前右下or右前上？





### Q：车载数据集，解算出的姿态有何特征？





### Q：G系解算和E系解算，精度、计算量比较？





### Q：GNSS/IMU 时间同步？

> * GNSS-IMU 时间同步有两层含义：
>   * IMU 的时间戳准确，表示 IMU 采样时刻的 GPS 时间，如果把数据发给上位机再赋值时间，会存在这传播时延，时间戳就不准确。
>   * IMU 的时间戳与 GNSS 对齐，有 GNSS 数据的同时一定有一个 IMU 数据，且各 IMU 数据的时间间隔保持一致。
> * 少部分 IMU 支持外部 GNSS 时间同步，就是把 PPS 接入对应引脚，就能以所需的频率输出等间隔且与 GPS 时间齐的 IMU 数据。
> * 大部分 IMU 可以设置成外部触发模式，即每当对应的引脚收到一个脉冲信号就输出一个 IMU 数据。想要获取 200Hz 的 IMU 数据，就需要给 IMU 发送与 GPS 时间对齐的 200 Hz 脉冲。
> * GNSS 接收机可以输出 PPS 信号，即每秒输出一个脉冲。PPS 脉冲相当的稳定，因为它由卫星上的原子钟维持；但是由于它每秒只输出一次，不能直接连 IMU 外部触发引脚，需要将 1Hz 的 PPS 脉冲转为 200Hz 的 IMU 触发脉冲信号。
>
> * STM32 的定时器由计数器、预分频器、和自动重载寄存器组成，
>   * STM32 的通用定时器连 IMU 外部触发引脚，用于产生 200 Hz 的 IMU 触发脉冲。
>   * STM32 的中断连 PPS 引脚，收到 PPS 秒脉冲信号就重置通用定时器的重装载计时器。
>   * 如果只是这样，还存在一个问题：以 200Hz 采样为例，PPS 信号来的时间与通用定时器的第 201 次脉冲正好重合，通用定时器如果偏快当前秒就采样了 201 次；所以需要处理一下：记录当前秒的采样数，采样满 200，就不继续采样，等待 PPS 信号。
>
> * STM32 还负责给 IMU 数据加时间戳，时间戳可以分为整秒和秒内两部分：
>   * 第一个整秒时间取 GNSS 接收机传来的 GPRMC 语句提供的时间（只需要发一次），有了第一个 GPS 整秒之后，之后每收到一次 PPS 就加一。
>   * 秒内的小数部分从 0 开始递增，200 Hz 采样就是每次递增 5ms。
>
> * 需要考虑电平匹配（TTL or CMOS）。GNSS 输出的 PPS 应该在 STM32 可接收的电平范围内，STM32 输出的 IMU 触发脉冲应该在 IMU 可接受的电平范围内，如果不匹配应当进行转换。
> * 如何评估是否需要时间同步？
> * 如何验证时间同步的有效性？



### Q：KF-GINS、PSINS 都主要用周内秒做时间戳，遇到星期界限怎么办？







### Q：KF-GINS 加 NHC、ZUPT 思路，以及效果？

> 





### Q：松组合、紧组合滤波特点

> * **GNSS/INS 组合导航中时间更新就是 INS 递推，量测更新是用 GNSS 来校正 INS 递推的结果**
>   * 根据 GNSS 校正 INS 递推的方式不同，我们可以将 GNSS/INS 组合导航分松组合、紧组合、深组合。
>   * IMU 频率一般为 200Hz，GNSS 频率一般为 1Hz，组合导航的时间更新的频率远大于量测更新频率。
>   * INS 和 GNSS 量测相互独立，原理上差异巨大，系统噪声和量测噪声不相关。
>   * INS 是内源性导航系统，量测值比较稳定，较少受外部环境的干扰；GNSS 是外源性导航系统，受信号传播路径影响很大。
>   * INS 的模型比较稳定而 GNSS 受外界干扰大，所以组合导航的时间更新部分较少出问题，出问题的都是量测更新。
>   * 在 INS 中影响导航精度的主要因素是惯性器件的长时间相关误差项，而短相关或白噪声的贡献一般非常小，因为 INS 算法本身就是个积分过程。
> * **我们可以把滤波的待估参数分为公共参数（位置、速度）、GNSS 参数（模糊度）、INS参数（零偏）**
>   * 松组合是分散式滤波、紧组合是集中式滤波：
>     * 分散滤波的好处是计算量小、可以对各子系统进行故障诊断和隔离。
>     * 在实际滤波应用中，微小的精度提高是次要的，系统工作的稳定性和可靠性才是更重要的。
>   * 紧组合中 GNSS 和 INS 参数之间的设计矩阵 H 是空的，但他们之间的协因数阵有值：
>
>     * 意味着 GNSS 参数和 INS 参数之间相关，这是紧组合滤波器优于松组合滤波器的关键所在。
>
>     * 通过分析 GNSS 参数和 INS 参数之间协因数阵的大小，我们可以知道紧组合中 GNSS 对 INS 的作用效果。
>
>     * 如果 GNSS 和 INS 参数之间的协方差阵为空，意味着 GNSS 和 INS 各算各的，然后再做组合，紧组合退化为松组合。
>
>     * 如果紧组合算法设计的合理，精度不会差于松组合。
> * **紧组合量测是卫星，松组合量测是三维位置**：
>   * 紧组合可以用选星算法，在对卫星几何构型影响不大的情况下，排除质量差的卫星；松组合如果排除了某一维的位置，会破坏待估参数的可测性，导致滤波发散。
>   * 松组合量测维数一定小于待估参数维数，紧组合量测维数有可能小于待估参数维数，也有可能大于待估参数维数。
>   * 松组合观测值之间相关性高，三维位置精度存在着数学上的相关性，差要差一起差；紧组合观测值之间的相关性较弱，各卫星观测值的精度主要取决于传播路径干扰，一颗卫星受干扰质量差，不代表另一颗卫星也受同样的干扰。
>     * 调整松组合三维位置之间的权重意义不大；调整紧组合各卫星观测值之间的权重有意义。
>     * 如果做量测噪声自适应，给 R 阵乘一个系数，松组合可以把 R 阵当一个整体来一个系数，紧组合应当考虑到各量测之间的差异，乘一个系数矩阵，或者序贯处理。
> * **状态量之间的可观测性差异**：
>   * 对于可观测性较强的状态分量，对应的状态初值和均方误差阵设置偏差容许适当大些，它们随着滤波更新将会快速收敛，如果均方误差阵设置过小，则当初始状态误差较大时会使状态收敛速度缓慢，变为有偏估计。
>   * 而对于可观测性较弱的状态，对应的状态初值和均方误差阵应该设置得尽量准确，如果均方误差阵设置过大，容易引起状态估计过程中的有偏或剧烈波动；反之，如果均方误差阵设置过小，同样会使状态收敛速度变慢。
> * **相较于纯 GNSS，紧组合算法中可以用 INS 递推得到一个更准确的先验位置**，验前残差精度更高，用来粗差探测效果更好。
> * **在卫星数不足的情况下**，松组合只能进行纯惯导递推，紧组合还可以进行滤波？

### Q：动态初始对准，速度必须 5m/s 以上吗？





---

<div align="center">
    <a name="SLAM"></a>
	<h2>&nbsp;5-SLAM&nbsp;</h2>
</div>

### Q：有了 NeRF 等高级 SLAM 算法，ORB-SLAM、VINS 等传统算法存在的价值？







---

<div align="center">
    <a name="MSF"></a>
	<h2>&nbsp;6-多源融合&nbsp;</h2>
</div>








